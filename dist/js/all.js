"use strict";const cartElements=()=>{const t=document.querySelector(".cart__container"),e=document.querySelector(".cart__overlay"),a=document.querySelector(".cart");return{container:t,navShop:document.querySelectorAll(".nav__shop"),cartOverlay:e,cart:a,cartClose:document.querySelector(".cart__close")}},{container:container,navShop:navShop,cartOverlay:cartOverlay,cart:cart,cartClose:cartClose}=cartElements();class Cart{async getCartItems(){try{const t=await fetch("/data/cart-data/cart-items.json");return await t.json()}catch(t){console.error(t)}}displayCartItems(t){let e="";t.forEach((t=>{e+=`\n                <article class="cart__card">\n                    <div class="cart__box">\n                        <img src="${t.image}" alt="cart item" class="cart__img">\n                    </div>\n                    <div class="cart__details">\n                        <h4 class="cart__title">${t.title}</h4>\n                        <span class="cart__price">${t.price}</span>\n                        <div class="cart__amount">\n                            <div class="cart__amont-content">\n                                <span class="cart__amount-box">\n                                    <img src="/app/images/chevron-down.svg" alt="" width="20px" height="20px">\n                                </span>\n                                <span class="cart__amount-number">0</span>\n                                <span class="cart__amount-box">\n                                    <img src="/app/images/chevron-up.svg" alt="" width="20px" height="20px">\n                                </span>\n                            </div>\n                            <img src="/app/images/can-trash.svg" alt="" class="cart__amount-trash" width="25px" height="25px">\n                        </div>\n                    </div>\n                </article>\n            `})),container&&container.insertAdjacentHTML("beforeend",e)}toggleCart(){navShop.forEach((t=>{t.addEventListener("click",(()=>{cartOverlay&&cartOverlay.classList.add("show-overlay"),cart&&cart.classList.add("show-cart")}))})),cartClose&&cartClose.addEventListener("click",(()=>{cart.classList.remove("show-cart"),cartOverlay.classList.remove("show-overlay")}))}}(async()=>{const t=new Cart,e=await t.getCartItems();t.displayCartItems(e),t.toggleCart()})();class Featured{async getItems(){try{const t=await fetch("/data/featured-data/featured-items.json");return await t.json()}catch(t){console.error(t)}}displayFeatured(t){let e="";t.forEach((t=>{e+=`\n                <article class="boot">\n                    <div class="boot__sale">Sale</div>\n                    <img src="${t.image}" alt="sale boot" class="boot__img">\n                    <span class="boot__name">${t.name}</span>\n                    <span class="boot__price">${t.price}</span>\n                    <button class="button-light">\n                        Add to cart <img src="/app/images/arrow-right.svg" alt="arrow right icon" width="20px" height="20px">\n                    </button>\n                </article>\n            `}));const a=document.querySelector(".featured__container");a&&a.insertAdjacentHTML("beforeend",e)}}(async()=>{const t=new Featured,e=await t.getItems();t.displayFeatured(e)})();const domElements=()=>{const t=document.querySelector(".nav__list"),e=document.getElementById("nav-menu");return{navList:t,navMenu:e,closeMobMenu:()=>{e&&e.classList.remove("show")}}};let{navList:navList,navMenu:navMenu,closeMobMenu:closeMobMenu}=domElements();class NavLinks{getLinks=async()=>{try{const t=await fetch("/data/nav-data/navlinks.json");return await t.json()}catch(t){console.error(t)}};displayLinks=t=>{let e="";t.forEach((t=>{e+=`\n                <li class="nav__item">\n                    <a href="${t.link}" class="nav__link" onclick="closeMobMenu()">${t.text}</a>\n                </li>\n            `})),navList&&navList.insertAdjacentHTML("beforeend",e)}}(async()=>{const t=new NavLinks,e=await t.getLinks();t.displayLinks(e)})();class NewCollection{async getItems(){try{const t=await fetch("/data/new-collection-data/new-data.json");return await t.json()}catch(t){console.error(t)}}displayItems(t){let e="";t.forEach((t=>{e+=`\n                <div class="new__boot-card">\n                    <img src="${t.image}" alt="new item boot" class="new__boot-img">\n                    <div class="new__boot-overlay">\n                        <h4 class="overlay__title">${t.title}</h4>\n                        <p class="overlay__description">\n                            ${t.desc1} <br/> ${t.desc2}\n                        </p>\n                        <span class="overlay__price">${t.price}</span>\n                        <button class="button">\n                            <a href="#">Add to cart</a>\n                        </button>\n                    </div>\n                </div>\n            `}));const a=document.querySelector(".new__boot");a&&a.insertAdjacentHTML("beforeend",e)}}(async()=>{const t=new NewCollection,e=await t.getItems();t.displayItems(e)})();class Shop{async getShopBoots(){try{const t=await fetch("data/shop-data/shop.json");return await t.json()}catch(t){console.log(t)}}displayShopBoots(t){let e="";t.forEach((t=>{e+=`\n                <article class="boot">\n                    <img src="${t.image}" alt="sale boot" class="boot__img">\n                    <div class="boot__data">\n                        <h4 class="boot__name">${t.name}</h4>\n                        <span class="boot__price">${t.price}</span>\n                        <p class="boot__description">\n                            The embodiment of iconic <br/> Dr Martens Footwear   \n                        </p>\n                        <button class="button-light">\n                            Add to cart <img src="/app/images/arrow-right.svg" alt="arrow right icon" width="20px" height="20px">\n                        </button>\n                    </div>\n                </article>\n            `}));const a=document.querySelector(".shop__container");a&&a.insertAdjacentHTML("beforeend",e)}}(async()=>{const t=new Shop,e=await t.getShopBoots();t.displayShopBoots(e)})();class Boots{async getBoots(){try{const t=await fetch("/data/women-data/boots.json");return await t.json()}catch(t){console.log(t)}}displayWomeBoots(t){let e="";t.forEach((t=>{e+=`\n                <article class="women__boot">\n                    <img src="${t.image}" alt="sale boot" class="women__boot-img">\n                    <div class="women__boot-data">\n                        <h4 class="boot__name">${t.name}</h4>\n                        <span class="boot__price">${t.price}</span>\n                        <p class="boot__description">\n                            The embodiment of iconic <br/> Dr Martens Footwear   \n                        </p>\n                        <button class="button-light">\n                            Add to cart <img src="/app/images/arrow-right.svg" alt="arrow right icon" width="20px" height="20px">\n                        </button>\n                    </div>\n                </article>\n            `}));const a=document.querySelector(".women__container");a&&a.insertAdjacentHTML("beforeend",e)}}function toggleSearch(){const t=document.querySelector(".nav__search-form"),e=document.querySelector(".nav__search"),a=document.querySelector(".close-search"),n=document.getElementById("search-input");t&&(e.addEventListener("click",(()=>{t.classList.toggle("active-form")})),a.addEventListener("click",(()=>{t.classList.remove("active-form"),n.value=""})))}function filterSearch(){const t=document.getElementById("search-input").value.toLowerCase();document.querySelectorAll("section").forEach((e=>{t&&e.id.toString().toLowerCase().indexOf(t)>-1&&document.getElementById(e.id).scrollIntoView()}))}(async()=>{const t=new Boots,e=await t.getBoots();t.displayWomeBoots(e)})();const openMenu=()=>{const t=document.getElementById("nav-toggle"),e=document.getElementById("nav-menu"),a=document.querySelector(".nav__search-form");t.addEventListener("click",(()=>{e.classList.add("show"),function(){if(a.classList.contains("active-form"))a.classList.remove("active-form")}()}))},closeMenu=()=>{const t=document.getElementById("nav-close"),e=document.getElementById("nav-menu");t&&t.addEventListener("click",(()=>{e.classList.remove("show")}))};window.onscroll=()=>{const t=document.getElementById("header");this.scrollY>=30?t.classList.add("scroll-header"):t.classList.remove("scroll-header")},openMenu(),closeMenu(),toggleSearch();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpc3BsYXlDYXJ0SXRlbXMuanMiLCJkaXNwbGF5RmVhdHVyZWQuanMiLCJkaXNwbGF5TmF2bGlua3MuanMiLCJkaXNwbGF5TmV3LmpzIiwiZGlzcGxheVNob3AuanMiLCJkaXNwbGF5V29tZW5Cb290cy5qcyIsImZpbHRlclNlYXJjaC5qcyIsImluZGV4LmpzIl0sIm5hbWVzIjpbImNhcnRFbGVtZW50cyIsImNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNhcnRPdmVybGF5IiwiY2FydCIsIm5hdlNob3AiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2FydENsb3NlIiwiQ2FydCIsImFzeW5jIiwicmVzcG9uc2UiLCJmZXRjaCIsImpzb24iLCJlcnJvciIsImNvbnNvbGUiLCJkaXNwbGF5Q2FydEl0ZW1zIiwiaXRlbXMiLCJlbGVtZW50IiwiZm9yRWFjaCIsIml0ZW0iLCJpbWFnZSIsInRpdGxlIiwicHJpY2UiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJ0b2dnbGVDYXJ0IiwiYnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImdldENhcnRJdGVtcyIsIkZlYXR1cmVkIiwiZGlzcGxheUZlYXR1cmVkIiwibmFtZSIsImZlYXR1cmVkIiwiZ2V0SXRlbXMiLCJkb21FbGVtZW50cyIsIm5hdkxpc3QiLCJuYXZNZW51IiwiZ2V0RWxlbWVudEJ5SWQiLCJjbG9zZU1vYk1lbnUiLCJOYXZMaW5rcyIsImdldExpbmtzIiwiZGlzcGxheUxpbmtzIiwibGlua3MiLCJyZXN1bHQiLCJsaW5rIiwidGV4dCIsIm5hdkxpbmtzIiwiTmV3Q29sbGVjdGlvbiIsImRpc3BsYXlJdGVtcyIsImRlc2MxIiwiZGVzYzIiLCJuZXdCb290IiwiY29sbGVjdGlvbiIsIlNob3AiLCJsb2ciLCJkaXNwbGF5U2hvcEJvb3RzIiwic2hvcEJvb3RzIiwiYm9vdCIsInNob3BDb250YWluZXIiLCJzaG9wIiwiZ2V0U2hvcEJvb3RzIiwiQm9vdHMiLCJkaXNwbGF5V29tZUJvb3RzIiwiYm9vdHMiLCJ0b2dnbGVTZWFyY2giLCJuYXZTZWFyY2hGb3JtIiwibmF2U2VhcmNoIiwiY2xvc2VTZWFyY2giLCJpbnB1dCIsInRvZ2dsZSIsInZhbHVlIiwiZmlsdGVyU2VhcmNoIiwic2VhcmNoVGVybSIsInRvTG93ZXJDYXNlIiwic2VjdGlvbiIsImlkIiwidG9TdHJpbmciLCJpbmRleE9mIiwic2Nyb2xsSW50b1ZpZXciLCJ3b21lbkJvb3RzIiwiZ2V0Qm9vdHMiLCJvcGVuTWVudSIsIm5hdlRvZ2dsZSIsImNvbnRhaW5zIiwiY2xvc2VTZWFyY2hGb3JtIiwiY2xvc2VNZW51IiwiY2xvc2VCdG4iLCJ3aW5kb3ciLCJvbnNjcm9sbCIsImhlYWRlciIsInRoaXMiLCJzY3JvbGxZIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLE1BQUFBLGFBQUEsS0FDQSxNQUFBQyxFQUFBQyxTQUFBQyxjQUFBLG9CQUNBQyxFQUFBRixTQUFBQyxjQUFBLGtCQUNBRSxFQUFBSCxTQUFBQyxjQUFBLFNBSUEsTUFBQSxDQUFBRixZQUFBSyxRQUhBSixTQUFBSyxpQkFBQSxjQUdBSCxjQUFBQyxPQUFBRyxVQUZBTixTQUFBQyxjQUFBLG1CQUtBRixVQUFBQSxVQUFBSyxRQUFBQSxRQUFBRixZQUFBQSxZQUFBQyxLQUFBQSxLQUFBRyxVQUFBQSxXQUFBUixlQUVBLE1BQUFTLEtBQ0FDLHFCQUNBLElBQ0EsTUFBQUMsUUFBQUMsTUFBQSxtQ0FFQSxhQURBRCxFQUFBRSxPQUdBLE1BQUFDLEdBQ0FDLFFBQUFELE1BQUFBLElBSUFFLGlCQUFBQyxHQUNBLElBQUFDLEVBQUEsR0FDQUQsRUFBQUUsU0FBQUMsSUFDQUYsR0FBQSxrSUFHQUUsRUFBQUMsMktBR0FELEVBQUFFLGlFQUNBRixFQUFBRyw2NEJBaUJBdEIsV0FBQUEsVUFBQXVCLG1CQUFBLFlBQUFOLEdBR0FPLGFBQ0FuQixRQUFBYSxTQUFBTyxJQUNBQSxFQUFBQyxpQkFBQSxTQUFBLEtBQ0F2QixhQUFBQSxZQUFBd0Is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c0MsZUFBQSxhQUNBRCxFQUFBckMsU0FBQXNDLGVBQUEsWUFFQWlELEdBQ0FBLEVBQUE5RCxpQkFBQSxTQUFBLEtBQ0FZLEVBQUFYLFVBQUFFLE9BQUEsWUFLQTRELE9BQUFDLFNBQUEsS0FDQSxNQUFBQyxFQUFBMUYsU0FBQXNDLGVBQUEsVUFDQXFELEtBQUFDLFNBQUEsR0FDQUYsRUFBQWhFLFVBQUFDLElBQUEsaUJBR0ErRCxFQUFBaEUsVUFBQUUsT0FBQSxrQkFLQXNELFdBQ0FJLFlBQ0FyQiIsImZpbGUiOiJhbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIlxyXG5cclxuY29uc3QgY2FydEVsZW1lbnRzID0gKCkgPT4ge1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJ0X19jb250YWluZXJcIik7XHJcbiAgICBjb25zdCBjYXJ0T3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FydF9fb3ZlcmxheVwiKTtcclxuICAgIGNvbnN0IGNhcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcnRcIik7XHJcbiAgICBjb25zdCBuYXZTaG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXZfX3Nob3BcIik7XHJcbiAgICBjb25zdCBjYXJ0Q2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcnRfX2Nsb3NlXCIpO1xyXG5cclxuICAgIHJldHVybiB7IGNvbnRhaW5lciwgbmF2U2hvcCwgY2FydE92ZXJsYXksIGNhcnQsIGNhcnRDbG9zZSB9O1xyXG59O1xyXG5cclxuY29uc3Qge2NvbnRhaW5lciwgbmF2U2hvcCwgY2FydE92ZXJsYXksIGNhcnQsIGNhcnRDbG9zZSB9ID0gY2FydEVsZW1lbnRzKCk7XHJcblxyXG5jbGFzcyBDYXJ0IHtcclxuICAgIGFzeW5jIGdldENhcnRJdGVtcygpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2RhdGEvY2FydC1kYXRhL2NhcnQtaXRlbXMuanNvblwiKVxyXG4gICAgICAgICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5Q2FydEl0ZW1zKGl0ZW1zKSB7XHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBcIlwiO1xyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgKz0gYFxyXG4gICAgICAgICAgICAgICAgPGFydGljbGUgY2xhc3M9XCJjYXJ0X19jYXJkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcnRfX2JveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7aXRlbS5pbWFnZX1cIiBhbHQ9XCJjYXJ0IGl0ZW1cIiBjbGFzcz1cImNhcnRfX2ltZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJ0X19kZXRhaWxzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImNhcnRfX3RpdGxlXCI+JHtpdGVtLnRpdGxlfTwvaDQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FydF9fcHJpY2VcIj4ke2l0ZW0ucHJpY2V9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FydF9fYW1vdW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FydF9fYW1vbnQtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FydF9fYW1vdW50LWJveFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi9hcHAvaW1hZ2VzL2NoZXZyb24tZG93bi5zdmdcIiBhbHQ9XCJcIiB3aWR0aD1cIjIwcHhcIiBoZWlnaHQ9XCIyMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FydF9fYW1vdW50LW51bWJlclwiPjA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXJ0X19hbW91bnQtYm94XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiL2FwcC9pbWFnZXMvY2hldnJvbi11cC5zdmdcIiBhbHQ9XCJcIiB3aWR0aD1cIjIwcHhcIiBoZWlnaHQ9XCIyMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIi9hcHAvaW1hZ2VzL2Nhbi10cmFzaC5zdmdcIiBhbHQ9XCJcIiBjbGFzcz1cImNhcnRfX2Ftb3VudC10cmFzaFwiIHdpZHRoPVwiMjVweFwiIGhlaWdodD1cIjI1cHhcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2FydGljbGU+XHJcbiAgICAgICAgICAgIGBcclxuICAgICAgICB9KVxyXG4gICAgICAgIGlmKGNvbnRhaW5lcikgY29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBlbGVtZW50KVxyXG4gICAgfVxyXG5cclxuICAgIHRvZ2dsZUNhcnQoKSB7XHJcbiAgICAgICAgbmF2U2hvcC5mb3JFYWNoKGJ0biA9PiB7XHJcbiAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYoY2FydE92ZXJsYXkpIGNhcnRPdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJzaG93LW92ZXJsYXlcIilcclxuICAgICAgICAgICAgICAgIGlmIChjYXJ0KSBjYXJ0LmNsYXNzTGlzdC5hZGQoXCJzaG93LWNhcnRcIilcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChjYXJ0Q2xvc2UpIHtcclxuICAgICAgICAgICAgY2FydENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYXJ0LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LWNhcnRcIilcclxuICAgICAgICAgICAgICAgIGNhcnRPdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LW92ZXJsYXlcIilcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59O1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IGNhcnQgPSBuZXcgQ2FydCgpXHJcbiAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGNhcnQuZ2V0Q2FydEl0ZW1zKClcclxuICAgIGNhcnQuZGlzcGxheUNhcnRJdGVtcyhpdGVtcylcclxuICAgIGNhcnQudG9nZ2xlQ2FydCgpXHJcbn0pKCk7XHJcblxyXG5cclxuIiwiXCJ1c2Ugc3RyaWN0XCJcclxuXHJcbmNsYXNzIEZlYXR1cmVkIHtcclxuICAgIGFzeW5jIGdldEl0ZW1zKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvZGF0YS9mZWF0dXJlZC1kYXRhL2ZlYXR1cmVkLWl0ZW1zLmpzb25cIilcclxuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheUZlYXR1cmVkKGl0ZW1zKSB7XHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBcIlwiO1xyXG4gICAgICAgIGl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgKz0gYFxyXG4gICAgICAgICAgICAgICAgPGFydGljbGUgY2xhc3M9XCJib290XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJvb3RfX3NhbGVcIj5TYWxlPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2l0ZW0uaW1hZ2V9XCIgYWx0PVwic2FsZSBib290XCIgY2xhc3M9XCJib290X19pbWdcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJvb3RfX25hbWVcIj4ke2l0ZW0ubmFtZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJib290X19wcmljZVwiPiR7aXRlbS5wcmljZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbi1saWdodFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBBZGQgdG8gY2FydCA8aW1nIHNyYz1cIi9hcHAvaW1hZ2VzL2Fycm93LXJpZ2h0LnN2Z1wiIGFsdD1cImFycm93IHJpZ2h0IGljb25cIiB3aWR0aD1cIjIwcHhcIiBoZWlnaHQ9XCIyMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2FydGljbGU+XHJcbiAgICAgICAgICAgIGBcclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmVhdHVyZWRfX2NvbnRhaW5lclwiKVxyXG4gICAgICAgIGlmKGNvbnRhaW5lcikgY29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBlbGVtZW50KVxyXG4gICAgfVxyXG59O1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IGZlYXR1cmVkID0gbmV3IEZlYXR1cmVkKClcclxuICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgZmVhdHVyZWQuZ2V0SXRlbXMoKVxyXG4gICAgZmVhdHVyZWQuZGlzcGxheUZlYXR1cmVkKGl0ZW1zKVxyXG59KSgpOyIsIlwidXNlIHN0cmljdFwiXHJcblxyXG5jb25zdCBkb21FbGVtZW50cyA9ICgpID0+IHtcclxuICAgIGNvbnN0IG5hdkxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fbGlzdFwiKVxyXG4gICAgY29uc3QgbmF2TWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmF2LW1lbnVcIilcclxuICAgIGNvbnN0IGNsb3NlTW9iTWVudSA9ICgpID0+IHtcclxuICAgICAgICBpZiAobmF2TWVudSkge1xyXG4gICAgICAgICAgICBuYXZNZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiB7IG5hdkxpc3QsIG5hdk1lbnUsIGNsb3NlTW9iTWVudSB9XHJcbn07XHJcblxyXG5sZXQgeyBuYXZMaXN0LCBuYXZNZW51LCBjbG9zZU1vYk1lbnUgfSA9IGRvbUVsZW1lbnRzKClcclxuXHJcbmNsYXNzIE5hdkxpbmtzIHtcclxuICAgIGdldExpbmtzID0gYXN5bmMgKCkgPT57XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcIi9kYXRhL25hdi1kYXRhL25hdmxpbmtzLmpzb25cIilcclxuICAgICAgICAgICAgY29uc3QgbGlua3MgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICAgICAgcmV0dXJuIGxpbmtzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheUxpbmtzID0gbGlua3MgPT4ge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xyXG4gICAgICAgIGxpbmtzLmZvckVhY2gobGluayA9PiB7XHJcbiAgICAgICAgICAgIHJlc3VsdCArPSBgXHJcbiAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJuYXZfX2l0ZW1cIj5cclxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHtsaW5rLmxpbmt9XCIgY2xhc3M9XCJuYXZfX2xpbmtcIiBvbmNsaWNrPVwiY2xvc2VNb2JNZW51KClcIj4ke2xpbmsudGV4dH08L2E+XHJcbiAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICBgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKG5hdkxpc3QpIG5hdkxpc3QuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIHJlc3VsdClcclxuICAgIH07XHJcbn07XHJcblxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgbmF2TGlua3MgPSBuZXcgTmF2TGlua3MoKVxyXG4gICAgY29uc3QgbGlua3MgPSBhd2FpdCBuYXZMaW5rcy5nZXRMaW5rcygpXHJcblxyXG4gICAgbmF2TGlua3MuZGlzcGxheUxpbmtzKGxpbmtzKVxyXG59KSgpO1xyXG4iLCJcInVzZSBzdHJpY3RcIlxyXG5cclxuY2xhc3MgTmV3Q29sbGVjdGlvbiB7XHJcbiAgICBhc3luYyBnZXRJdGVtcygpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFwiL2RhdGEvbmV3LWNvbGxlY3Rpb24tZGF0YS9uZXctZGF0YS5qc29uXCIpXHJcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXlJdGVtcyhpdGVtcykge1xyXG4gICAgICAgIGxldCBlbGVtZW50ID0gXCJcIjtcclxuICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50ICs9IGBcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJuZXdfX2Jvb3QtY2FyZFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtpdGVtLmltYWdlfVwiIGFsdD1cIm5ldyBpdGVtIGJvb3RcIiBjbGFzcz1cIm5ld19fYm9vdC1pbWdcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibmV3X19ib290LW92ZXJsYXlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwib3ZlcmxheV9fdGl0bGVcIj4ke2l0ZW0udGl0bGV9PC9oND5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJvdmVybGF5X19kZXNjcmlwdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtpdGVtLmRlc2MxfSA8YnIvPiAke2l0ZW0uZGVzYzJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJvdmVybGF5X19wcmljZVwiPiR7aXRlbS5wcmljZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCI+QWRkIHRvIGNhcnQ8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGBcclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbnN0IG5ld0Jvb3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ld19fYm9vdFwiKVxyXG4gICAgICAgIGlmKG5ld0Jvb3QpIG5ld0Jvb3QuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGVsZW1lbnQpXHJcbiAgICB9XHJcbn07XHJcblxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IG5ldyBOZXdDb2xsZWN0aW9uKClcclxuICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgY29sbGVjdGlvbi5nZXRJdGVtcygpXHJcbiAgICBjb2xsZWN0aW9uLmRpc3BsYXlJdGVtcyhpdGVtcylcclxufSkoKTsiLCJcInVzZSBzdHJpY3RcIlxyXG5cclxuY2xhc3MgU2hvcCB7XHJcbiAgICBhc3luYyBnZXRTaG9wQm9vdHMoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcImRhdGEvc2hvcC1kYXRhL3Nob3AuanNvblwiKVxyXG4gICAgICAgICAgICBjb25zdCBzaG9wQm9vdHMgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzaG9wQm9vdHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkaXNwbGF5U2hvcEJvb3RzKHNob3BCb290cykge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xyXG4gICAgICAgIHNob3BCb290cy5mb3JFYWNoKGJvb3QgPT4ge1xyXG4gICAgICAgICAgICByZXN1bHQgKz0gYFxyXG4gICAgICAgICAgICAgICAgPGFydGljbGUgY2xhc3M9XCJib290XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke2Jvb3QuaW1hZ2V9XCIgYWx0PVwic2FsZSBib290XCIgY2xhc3M9XCJib290X19pbWdcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYm9vdF9fZGF0YVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJib290X19uYW1lXCI+JHtib290Lm5hbWV9PC9oND5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJib290X19wcmljZVwiPiR7Ym9vdC5wcmljZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwiYm9vdF9fZGVzY3JpcHRpb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBlbWJvZGltZW50IG9mIGljb25pYyA8YnIvPiBEciBNYXJ0ZW5zIEZvb3R3ZWFyICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbi1saWdodFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQWRkIHRvIGNhcnQgPGltZyBzcmM9XCIvYXBwL2ltYWdlcy9hcnJvdy1yaWdodC5zdmdcIiBhbHQ9XCJhcnJvdyByaWdodCBpY29uXCIgd2lkdGg9XCIyMHB4XCIgaGVpZ2h0PVwiMjBweFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvYXJ0aWNsZT5cclxuICAgICAgICAgICAgYFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHNob3BDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNob3BfX2NvbnRhaW5lclwiKVxyXG4gICAgICAgIGlmIChzaG9wQ29udGFpbmVyKSBzaG9wQ29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCByZXN1bHQpXHJcbiAgICB9XHJcbn07XHJcblxyXG4oYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3Qgc2hvcCA9IG5ldyBTaG9wKClcclxuICAgIGNvbnN0IHNob3BCb290cyA9IGF3YWl0IHNob3AuZ2V0U2hvcEJvb3RzKClcclxuICAgIHNob3AuZGlzcGxheVNob3BCb290cyhzaG9wQm9vdHMpXHJcbn0pKCk7IiwiXCJ1c2Ugc3RyaWN0XCJcclxuXHJcbmNsYXNzIEJvb3RzIHtcclxuICAgIGFzeW5jIGdldEJvb3RzKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCIvZGF0YS93b21lbi1kYXRhL2Jvb3RzLmpzb25cIilcclxuICAgICAgICAgICAgY29uc3QgYm9vdHMgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICAgICAgcmV0dXJuIGJvb3RzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBkaXNwbGF5V29tZUJvb3RzKGJvb3RzKSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XHJcbiAgICAgICAgYm9vdHMuZm9yRWFjaChib290ID0+IHtcclxuICAgICAgICAgICAgcmVzdWx0ICs9IGBcclxuICAgICAgICAgICAgICAgIDxhcnRpY2xlIGNsYXNzPVwid29tZW5fX2Jvb3RcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7Ym9vdC5pbWFnZX1cIiBhbHQ9XCJzYWxlIGJvb3RcIiBjbGFzcz1cIndvbWVuX19ib290LWltZ1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3b21lbl9fYm9vdC1kYXRhXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImJvb3RfX25hbWVcIj4ke2Jvb3QubmFtZX08L2g0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJvb3RfX3ByaWNlXCI+JHtib290LnByaWNlfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJib290X19kZXNjcmlwdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIGVtYm9kaW1lbnQgb2YgaWNvbmljIDxici8+IERyIE1hcnRlbnMgRm9vdHdlYXIgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uLWxpZ2h0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBZGQgdG8gY2FydCA8aW1nIHNyYz1cIi9hcHAvaW1hZ2VzL2Fycm93LXJpZ2h0LnN2Z1wiIGFsdD1cImFycm93IHJpZ2h0IGljb25cIiB3aWR0aD1cIjIwcHhcIiBoZWlnaHQ9XCIyMHB4XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9hcnRpY2xlPlxyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud29tZW5fX2NvbnRhaW5lclwiKVxyXG4gICAgICAgIGlmIChjb250YWluZXIpIGNvbnRhaW5lci5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgcmVzdWx0KVxyXG4gICAgfVxyXG59O1xyXG5cclxuKGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHdvbWVuQm9vdHMgPSBuZXcgQm9vdHMoKVxyXG4gICAgY29uc3QgYm9vdHMgPSBhd2FpdCB3b21lbkJvb3RzLmdldEJvb3RzKClcclxuXHJcbiAgICB3b21lbkJvb3RzLmRpc3BsYXlXb21lQm9vdHMoYm9vdHMpXHJcbn0pKCk7XHJcbiIsIlwidXNlIHN0cmljdFwiXHJcblxyXG5mdW5jdGlvbiB0b2dnbGVTZWFyY2goKSB7XHJcbiAgICBjb25zdCBuYXZTZWFyY2hGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZfX3NlYXJjaC1mb3JtXCIpO1xyXG4gICAgY29uc3QgbmF2U2VhcmNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZfX3NlYXJjaFwiKTtcclxuICAgIGNvbnN0IGNsb3NlU2VhcmNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZS1zZWFyY2hcIik7XHJcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VhcmNoLWlucHV0XCIpO1xyXG5cclxuICAgIGlmIChuYXZTZWFyY2hGb3JtKSB7XHJcbiAgICAgICAgbmF2U2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG5hdlNlYXJjaEZvcm0uY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZS1mb3JtXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNsb3NlU2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIG5hdlNlYXJjaEZvcm0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZS1mb3JtXCIpO1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbHRlclNlYXJjaCgpIHtcclxuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZWFyY2gtaW5wdXRcIik7XHJcbiAgICBjb25zdCBzZWFyY2hUZXJtID0gaW5wdXQudmFsdWUudG9Mb3dlckNhc2UoKTtcclxuICAgIGNvbnN0IHNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcInNlY3Rpb25cIik7XHJcblxyXG4gICAgc2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHsgICBcclxuICAgICAgICBpZiAoc2VhcmNoVGVybSAmJiBzZWN0aW9uLmlkLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaFRlcm0pID4gLTEpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VjdGlvbi5pZCkuc2Nyb2xsSW50b1ZpZXcoKVxyXG4gICAgICAgIH0gXHJcbiAgICB9KVxyXG59O1xyXG5cclxuXHJcblxyXG4iLCJjb25zdCBvcGVuTWVudSA9ICgpID0+IHtcclxuICAgIGNvbnN0IG5hdlRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmF2LXRvZ2dsZVwiKVxyXG4gICAgY29uc3QgbmF2TWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmF2LW1lbnVcIilcclxuICAgIGNvbnN0IG5hdlNlYXJjaEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdl9fc2VhcmNoLWZvcm1cIilcclxuXHJcbiAgICBuYXZUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBuYXZNZW51LmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpXHJcbiAgICAgICAgY2xvc2VTZWFyY2hGb3JtKClcclxuICAgIH0pXHJcblxyXG4gICAgZnVuY3Rpb24gY2xvc2VTZWFyY2hGb3JtKCkge1xyXG4gICAgICAgIGlmIChuYXZTZWFyY2hGb3JtLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZS1mb3JtXCIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuYXZTZWFyY2hGb3JtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtZm9ybVwiKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbmNvbnN0IGNsb3NlTWVudSA9ICgpID0+IHtcclxuICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuYXYtY2xvc2VcIilcclxuICAgIGNvbnN0IG5hdk1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5hdi1tZW51XCIpXHJcblxyXG4gICAgaWYgKGNsb3NlQnRuKSB7XHJcbiAgICAgICAgY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgbmF2TWVudS5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn07XHJcblxyXG53aW5kb3cub25zY3JvbGwgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImhlYWRlclwiKVxyXG4gICAgaWYgKHRoaXMuc2Nyb2xsWSA+PSAzMCkge1xyXG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwic2Nyb2xsLWhlYWRlclwiKVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJzY3JvbGwtaGVhZGVyXCIpXHJcbiAgICB9XHJcbn07XHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgb3Blbk1lbnUoKVxyXG4gICAgY2xvc2VNZW51KClcclxuICAgIHRvZ2dsZVNlYXJjaCgpXHJcbn0pKCk7XHJcblxyXG5cclxuIl19
